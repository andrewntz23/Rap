<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns="http://www.w3.org/2000/svg"
    version="2.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="#all">
    <xsl:output method="xml" indent="yes"/>
    <xsl:variable name="barWidth" select="20"/>
    <xsl:variable name="barInterval" select="$barWidth + 10"/>
    <xsl:variable name="barHeight" select="300"/>
    <xsl:variable name="barShift" select="22"/>
    <xsl:variable name="motif" select="15"/>
    <xsl:variable name="lineWidth" select="$motif*$barInterval + 20"/>
    <xsl:variable name="motifs"
        select="distinct-values(//li/descendant::*[not(self::group)][not(self::AAVE)][not(self::AAVE)]/name())"/>
    <xsl:template match="/">
        <svg height="100%" width="100%">
            <g transform="translate(40, 350)">
                <text x="{$lineWidth div 2}" y="-{$barHeight + 20}" text-anchor="middle"><xsl:apply-templates select="//albumTitle"/></text>
                <line x1="20" x2="20" y1="0" y2="-320" stroke="black" stroke-width="1"/>
                <line x1="20" x2="{$lineWidth}" y1="0" y2="0" stroke="black"
                    stroke-width="1"/>
                <line x1="{20}" x2="{$lineWidth}" y1="-{$barHeight div 2}"
                    y2="-{$barHeight div 2}" stroke="black" opacity="0.5" stroke-dasharray="8 4"
                    stroke-width="1"/>
                <text x="10" y="5" text-anchor="end">0%</text>
                <text x="10" y="{5 - $barHeight div 2}" text-anchor="end">50%</text>
                <text x="10" y="{5 - $barHeight}" text-anchor="end">100%</text>
                <xsl:apply-templates select="//album"></xsl:apply-templates>
            </g>
        </svg>
    </xsl:template>
    <xsl:template match="album">
        <xsl:variable name="money" select="//money"/>
        <xsl:variable name="oldschool" select="//oldschool"/>
        <xsl:variable name="success" select="//success"/>
        <xsl:variable name="women" select="//women"/>
        <xsl:variable name="fashion" select="//fashion"/>
        <xsl:variable name="struggle" select="//struggle"/>
        <xsl:variable name="food" select="//food"/>
        <xsl:variable name="money" select="//money"/>
        <xsl:variable name="alcohol" select="//alcohol"/>
        <xsl:variable name="hiphop" select="//hiphop"/>
        <xsl:variable name="haters" select="//haters"/>
        <xsl:variable name="guns" select="//guns"/>
        <xsl:variable name="popculture" select="//popculture"/>
        <xsl:variable name="weed" select="//weed"/>
        <xsl:variable name="sports" select="//sports"/>
        <xsl:variable name="geo" select="//geo"/>
        <xsl:variable name="criticism" select="//criticism"/>
        <xsl:variable name="violence" select="//violence"/>
        <xsl:variable name="drugs" select="//drugs"/>
        <xsl:variable name="power" select="//power"/>
        <xsl:variable name="sex" select="//sex"/>
        <xsl:variable name="religion" select="//religion"/>
        <xsl:variable name="history" select="//history"/>
        <xsl:apply-templates/>
    </xsl:template>
    
</xsl:stylesheet>